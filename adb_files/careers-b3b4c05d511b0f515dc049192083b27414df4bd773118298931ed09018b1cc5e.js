ShopifyMarketing.EmailForm=function(){var t=function(t){this.options=t||{},this.$form=this.options.$form||$(".email-form"),this.$success=this.options.$success||$(".email-form-success"),this.ioKey=this.options.ioKey||this.$form.data("io-key"),this.trackAction=this.options.trackAction||this.$form.data("track-action"),this.trackParams=this.options.trackParams||{},this.activeClass=this.options.activeClass||"js-is-active",this.$emailField=this.$form.find(".email-form__email"),this.$messages=this.$emailField.find(".marketing-form__messages"),this.$form.on("submit",_.bind(this.submit,this))};return t.prototype.submit=function(t){t.preventDefault();var e=$(t.currentTarget).serializeJSON();this.validateEmail(e.email)?this.sendData(e):this.showError(t)},t.prototype.sendData=function(t){t=t||{};var e={id:t.id||t.email,created_at:(new Date).getTime()/1e3},i=_.extend(this.trackParams,e,t);i[this.ioKey]=!0,"undefined"!=typeof _cio&&(_cio.identify(i),this.showSuccess(),this.track())},t.prototype.showSuccess=function(){this.$form.add(this.$success).prepareTransition().addClass(this.activeClass)},t.prototype.track=function(){ShopifyMarketing.Analytics.track("Email",this.trackAction)},t.prototype.showError=function(t){this.$messages.empty(),this.$messages.prepend(JST["marketing_assets/templates/form_error"]({err:this.errors.email,field:"email"})),$(t.currentTarget).find(".email-form__email").focus()},t.prototype.validateEmail=function(t){return this.errors={},$.trim(t)?/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)?!0:(this.errors.email={invalid:!0},!1):(this.errors.email={empty:!0},!1)},t}(),ShopifyMarketing.SeriesModal=function(){var t=ShopifyMarketing.Modal,e=ShopifyMarketing.keyCodes,i=function(){t.apply(this,arguments),this.options=_.extend(this.options,{isSeries:!0,modalNavNextButtonSelector:".modal-nav-next",modalNavPrevButtonSelector:".modal-nav-prev"}),this.$modalSource.off("click"),this.$modalSource.off("keydown"),this.$modalSource=this.$el.find(this.options.itemSelector),this.$activeSource=this.$modalSource,this.nextItem=_.bind(this.nextItem,this),this.prevItem=_.bind(this.prevItem,this),this.render=_.bind(this.render,this),this.modalSeriesSize=this.$modalSource.size(),this.$el.on("click",this.options.itemSelector,this._onClick)};return i.prototype=_.clone(t.prototype),i.prototype.open=function(){t.prototype.open.apply(this,arguments),this.modalDom.$modal.on("click",this.options.modalNavNextButtonSelector,this.nextItem),this.modalDom.$modal.on("click",this.options.modalNavPrevButtonSelector,this.prevItem)},i.prototype.close=function(){t.prototype.close.apply(this,arguments),this.modalDom.$modal.off("click",this.options.modalNavNextButtonSelector,this.nextItem),this.modalDom.$modal.off("click",this.options.modalNavPrevButtonSelector,this.prevItem)},i.prototype.to=function(t){this.currentIndex=t,this.$activeSource=this.$modalSource.eq(this.currentIndex),this.$modalSource.removeClass(this.options.modalActiveSourceClass),this.active?(this.modalDom.$modal.addClass("transition-out").removeClass("js-view-active").prepareTransition({eventOnly:!0}),this.modalDom.$modal.one("transitionended",this.render)):this.render(),this.$activeSource.addClass(this.options.modalActiveSourceClass),this.modalDom.$modal.focus()},i.prototype.render=function(){var t;this.data=_.extend(this.$activeSource.data(),this.options.data),t=this.template(this.data),this.modalDom.$modal.html(t).removeClass("transition-out").prepareTransition({eventOnly:!0}),this.modalDom.$modal.one("transitionended",_.bind(function(){this.modalDom.$modal.addClass("js-view-active")},this)),this.picturefill()},i.prototype.prevItem=function(){var t=0===this.currentIndex?this.modalSeriesSize-1:this.currentIndex-1;this.to(t)},i.prototype.nextItem=function(){var t=this.currentIndex===this.modalSeriesSize-1?0:this.currentIndex+1;this.to(t)},i.prototype._onClick=function(t){t.preventDefault(),this.$modalSource=this.$el.find(this.options.itemSelector),this.to(this.$modalSource.index($(t.currentTarget))),this.open(t)},i.prototype._onKeyDown=function(t){if(this.active)switch(t.keyCode){case e.ESCAPE:this.close();break;case e.LEFT:this.modalSeriesSize>0&&this.prevItem();break;case e.RIGHT:this.modalSeriesSize>0&&this.nextItem()}},i}(),function(){var t=function(){this.$el=$("#CareersOfficeSelect"),this.$el.length&&(this.$filters=this.$el.find(".careers-postings__filter").not(".careers-postings__filter--other"),this.$postings=$(".careers-postings__category-listings").find("li"),this.$other=$(".careers-postings__filter--other"),this.$columns=$(".careers-postings__category"),this.location=this.$el.data("location"),this.addEventListeners(),this.$filters.filter('[data-location="'+this.location+'"]').addClass("js-is-active"),this.filter())};return t.prototype.filter=function(){var t,e,i=RegExp(this.location,"i");"all"!==this.location&&this.$postings.each(function(s,o){t=$(o),e=t.data("location").toLowerCase(),i.test(e)?t.removeClass("js-is-hidden"):t.addClass("js-is-hidden")}),this.hideEmptyCategories()},t.prototype.addEventListeners=function(){this.$filters.on("click",this.onFilterClick.bind(this)),this.$other.on("click",this.onOtherClick.bind(this))},t.prototype.onFilterClick=function(t){t.preventDefault(),this.location=$(t.target).data("location"),this.$postings.removeClass("js-is-hidden"),this.highlightClicked(t),this.filter()},t.prototype.onOtherClick=function(t){t.preventDefault(),this.location="";var e=this.$filters.get().reduce(function(t,e,i){var s=i===this.$filters.length-1?"":"|";return t+$(e).data("location")+s}.bind(this),""),i=new RegExp(e,"i");this.$postings.each(function(){var t=$(this);i.test(t.data("location"))?t.addClass("js-is-hidden"):t.removeClass("js-is-hidden")}),this.highlightClicked(t),this.hideEmptyCategories()},t.prototype.highlightClicked=function(t){this.$filters.removeClass("js-is-active").attr("aria-pressed","false"),this.$other.removeClass("js-is-active").attr("aria-pressed","false"),$(t.target).addClass("js-is-active").attr("aria-pressed","true")},t.prototype.hideEmptyCategories=function(){this.$columns.each(function(){var t=$(this),e=t.find("li").not(".js-is-hidden");0===e.length?t.addClass("js-is-hidden"):t.removeClass("js-is-hidden")})},new t}(),function(){var t=$(".email-form"),e=new ShopifyMarketing.SeriesModal($(document),JST["templates/modal/careers-video"],{itemSelector:".js-careers-modal"});$(document.body).on("click",".js-close-modal",e.close),t.length&&new ShopifyMarketing.EmailForm({ioKey:"careers",trackAction:"Careers",trackParams:{careers_team:t.data("team"),careers_location:t.data("location")}}),new ShopifyMarketing.EqualHeight($(".careers-stats"),$(".careers-stats__item")),new ShopifyMarketing.Carousel($(".careers-carousel")).start(),new ShopifyMarketing.TabbedCarousel($(".offices-carousel"),{currentIndex:2}),new ShopifyMarketing.Accordion($("#OfficesAccordion")),$(".js-career-social-button").on("click",function(t){t.preventDefault()})}();